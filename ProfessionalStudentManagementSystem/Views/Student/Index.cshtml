@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    ViewData["Title"] = "Student Management";
    Layout = null;
}

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />

<style>
    .small-dot-loader {
        width: 40px;
        height: 40px;
        margin: auto;
        position: relative;
    }

        .small-dot-loader::before {
            content: "";
            width: 10px;
            height: 10px;
            background-color: red;
            border-radius: 50%;
            position: absolute;
            top: 50%;
            left: 50%;
            transform-origin: -15px 0;
            animation: spinDot 1s linear infinite;
        }

    @@keyframes spinDot {
        from
    {
        transform: rotate(0deg);
    }

    to {
        transform: rotate(360deg);
    }

    }
</style>


<div class="container mt-4">
    
    <h2>Student Management</h2>
    <!-- Search -->
    <div class="row mb-3">
        <div class="col-md-4">
            <input type="text" id="search" class="form-control" placeholder="Search by name or email" />
        </div>
        <div class="col-md-2">
            <button class="btn btn-primary" onclick="loadStudents()">Search</button>
        </div>
    </div>

    <!-- Student Form -->
    <div class="card p-3 mb-3">
        <input type="hidden" id="StudentId" />

        <div class="row">
            <div class="col-md-3">
                <input type="text" id="Name" class="form-control" placeholder="Name" />
                <span id="nameError" style="color:red;"></span>
            </div>
            <div class="col-md-3">
                <input type="number" id="Age" class="form-control" placeholder="Age" />
                <span id="ageError" style="color:red;"></span>
            </div>
            <div class="col-md-3">
                <input type="email" id="Email" class="form-control" placeholder="Email" />
                <span id="emailError" style="color:red;"></span>
            </div>
            <div class="col-md-2">
                 <button class="btn btn-success" onclick="saveStudent()">Save</button> 
            </div>
        </div>
    </div>

    <!-- Student Table -->
    <table class="table table-bordered table-striped">
        <thead>
            <tr>
                <th onclick="sort('Name')">Name</th>
                <th onclick="sort('Age')">Age</th>
                <th onclick="sort('Email')">Email</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody id="studentTable">
            <tr id="tableLoader" style="display:none;">
                <td colspan="4" class="text-center">
                    <div class="small-dot-loader"></div>
                </td>
            </tr>
        </tbody>
    </table>

    <!-- Pagination -->
    <div id="pagination"></div>


</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="~/js/student.js"></script>